{"version":3,"file":"../admin-image-uploader-100.min.js","sources":["admin-image-uploader-100.js"],"sourcesContent":["/**\r\n * File admin-image-uploader.js\r\n *\r\n * Handles custom upload fields.\r\n *\r\n * Author: Diego Versiani\r\n * Contact: https://diegoversiani.me/\r\n */\r\n( function( $ ) {\r\n\r\n\t'use strict';\r\n\r\n\tvar custom_uploader;\r\n\tvar dialog_title, button_text, library_type, preview_id, control_id, multiple = false;\r\n\r\n\r\n\tjQuery( document ).ready( function() {\r\n\t\tjQuery('.image-upload-select-button').on( 'click', select_image_button_click );\r\n\t\tjQuery('.image-upload-clear-button').on( 'click', clear_image_button_click );\r\n\t});\r\n\r\n\r\n\r\n\tfunction select_image_button_click() {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tdialog_title = $(this).data('dialog-title');\r\n\t\tbutton_text = $(this).data('dialog-button-text');\r\n\t\tlibrary_type = $(this).data('library-type');\r\n\t\tpreview_id = $(this).data('preview-id');\r\n\t\tcontrol_id = $(this).data('control-id');\r\n\t\tmultiple = $(this).data('multiple');\r\n\r\n\t\t//Extend the wp.media object\r\n\t\tcustom_uploader = wp.media.frames.file_frame = wp.media({\r\n\t\ttitle: dialog_title,\r\n\t\tbutton: {\r\n\t\t\ttext: button_text\r\n\t\t},\r\n\t\tlibrary : { type : library_type },\r\n\t\tmultiple: multiple\r\n\t\t});\r\n\r\n\t\t// When a file is selected\r\n\t\t// - grab the IDs and set it as the text field's value\r\n\t\t// - update image previews\r\n\t\tcustom_uploader.on('select', handle_images_selected);\r\n\r\n\t\t//Open the uploader dialog\r\n\t\tcustom_uploader.open();\r\n\t}\r\n\r\n\r\n\r\n\tfunction clear_image_button_click() {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tvar preview_id, control_id, message;\r\n\t\tpreview_id = $(this).data('preview-id');\r\n\t\tcontrol_id = $(this).data('control-id');\r\n\t\tmessage = $(this).data('message');\r\n\r\n\t\tjQuery('#' + control_id).val('');\r\n\t\tjQuery('#' + preview_id).empty().append(message);\r\n\t}\r\n\r\n\r\n\r\n\tfunction handle_images_selected() {\r\n\t\tvar ids = '';\r\n\t\tvar attachments = custom_uploader.state().get('selection');\r\n\r\n\t\tvar html = '<ul class=\"uploaded-image-list\">';\r\n\r\n\t\tfor (var i = 0; i < attachments.models.length; i++) {\r\n\t\tvar attachment = attachments.models[i];\r\n\r\n\t\tif ( custom_uploader.options.library.type == 'image' ) {\r\n\t\t\thtml += '<li class=\"uploaded-image\"><img src=\"' + attachment.attributes.url + '\"></li>';\r\n\t\t}\r\n\r\n\t\tids += attachment.attributes.id;\r\n\t\tif ( i < attachments.models.length-1 ) {\r\n\t\t\tids += ',';\r\n\t\t}\r\n\t\t}\r\n\r\n\t\thtml += '</ul>';\r\n\r\n\t\tjQuery('#' + control_id).val(ids);\r\n\t\tjQuery('#' + preview_id).empty();\r\n\t\tjQuery('#' + preview_id).append(html);\r\n\t}\r\n\r\n\r\n\r\n\tfunction get_extension( url ){\r\n\t\treturn url.substr((url.lastIndexOf('.') + 1));\r\n\t}\r\n\r\n} )( jQuery );\r\n"],"names":["$","custom_uploader","dialog_title","button_text","library_type","preview_id","control_id","multiple","select_image_button_click","event","preventDefault","this","data","wp","media","frames","file_frame","title","button","text","library","type","on","handle_images_selected","open","clear_image_button_click","message","jQuery","val","empty","append","ids","attachments","state","get","html","i","models","length","attachment","options","attributes","url","id","document","ready"],"mappings":"CAQA,SAAYA,gBAIX,IAAIC,EACAC,EAAcC,EAAaC,EAAcC,EAAYC,EAAYC,EAUrE,SAASC,IACRC,MAAMC,iBAENR,EAAeF,EAAEW,MAAMC,KAAK,gBAC5BT,EAAcH,EAAEW,MAAMC,KAAK,sBAC3BR,EAAeJ,EAAEW,MAAMC,KAAK,gBAC5BP,EAAaL,EAAEW,MAAMC,KAAK,cAC1BN,EAAaN,EAAEW,MAAMC,KAAK,cAC1BL,EAAWP,EAAEW,MAAMC,KAAK,aAGxBX,EAAkBY,GAAGC,MAAMC,OAAOC,WAAaH,GAAGC,MAAM,CACxDG,MAAOf,EACPgB,OAAQ,CACPC,KAAMhB,GAEPiB,QAAU,CAAEC,KAAOjB,GACnBG,SAAUA,KAMMe,GAAG,SAAUC,GAG7BtB,EAAgBuB,OAKjB,SAASC,IAGR,IAAIpB,EAAYC,EAAYoB,EAF5BjB,MAAMC,iBAGNL,EAAaL,EAAEW,MAAMC,KAAK,cAC1BN,EAAaN,EAAEW,MAAMC,KAAK,cAC1Bc,EAAU1B,EAAEW,MAAMC,KAAK,WAEvBe,OAAO,IAAMrB,GAAYsB,IAAI,IAC7BD,OAAO,IAAMtB,GAAYwB,QAAQC,OAAOJ,GAKzC,SAASH,IAMR,IALA,IAAIQ,EAAM,GACNC,EAAc/B,EAAgBgC,QAAQC,IAAI,aAE1CC,EAAO,mCAEFC,EAAI,EAAGA,EAAIJ,EAAYK,OAAOC,OAAQF,IAAK,CACpD,IAAIG,EAAaP,EAAYK,OAAOD,GAES,SAAxCnC,EAAgBuC,QAAQpB,QAAQC,OACpCc,GAAQ,wCAA0CI,EAAWE,WAAWC,IAAM,WAG/EX,GAAOQ,EAAWE,WAAWE,GACxBP,EAAIJ,EAAYK,OAAOC,OAAO,IAClCP,GAAO,KAIRI,GAAQ,QAERR,OAAO,IAAMrB,GAAYsB,IAAIG,GAC7BJ,OAAO,IAAMtB,GAAYwB,QACzBF,OAAO,IAAMtB,GAAYyB,OAAOK,GA3EjCR,OAAQiB,UAAWC,MAAO,WACzBlB,OAAO,+BAA+BL,GAAI,QAASd,GACnDmB,OAAO,8BAA8BL,GAAI,QAASG,KAVpD,CA4FKE"}